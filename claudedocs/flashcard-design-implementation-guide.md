# í”Œë˜ì‹œì¹´ë“œ ì»´í¬ë„ŒíŠ¸ êµ¬í˜„ ê°€ì´ë“œ

## ğŸ“‹ ê°œìš”

ì¼ë³¸ì–´ í•™ìŠµ ì•±ì˜ í”Œë˜ì‹œì¹´ë“œ ì‹œìŠ¤í…œ ì„¤ê³„ ë° êµ¬í˜„ ì™„ë£Œ.

**ì‘ì„±ì¼**: 2025-10-20
**ìƒíƒœ**: ì„¤ê³„ ì™„ë£Œ, êµ¬í˜„ ì¤€ë¹„ ì™„ë£Œ

---

## ğŸ¯ êµ¬í˜„ëœ ê¸°ëŠ¥

### 1. í•µì‹¬ ì»´í¬ë„ŒíŠ¸

#### âœ… Flashcard (ë‹¨ì¼ ì¹´ë“œ)
- 3D í”Œë¦½ ì• ë‹ˆë©”ì´ì…˜ (CSS ê¸°ë°˜)
- í•™ìŠµ íƒ€ì…ë³„ ì½˜í…ì¸  ë Œë”ë§
- í´ë¦­/Space í‚¤ë¡œ ë’¤ì§‘ê¸°
- ì ‘ê·¼ì„± ì§€ì› (ARIA, í‚¤ë³´ë“œ)

#### âœ… FlashcardDeck (ì¹´ë“œ ì„¸íŠ¸ ê´€ë¦¬)
- ì§„í–‰ë¥  ì¶”ì 
- ì¹´ë“œ ë„¤ë¹„ê²Œì´ì…˜
- ë‹µë³€ ê¸°ë¡
- ì™„ë£Œ ê°ì§€ ë° í†µê³„

#### âœ… AnswerButtons (SRS í‰ê°€)
- 4ë‹¨ê³„ í‰ê°€ (Again/Hard/Good/Easy)
- ìƒ‰ìƒ ì½”ë”©
- í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ (1-4)
- í˜¸ë²„/í¬ì»¤ìŠ¤ íš¨ê³¼

#### âœ… ProgressBar (ì§„í–‰ë¥ )
- ì‹œê°ì  ì§„í–‰ë¥ 
- í¼ì„¼íŠ¸ í‘œì‹œ
- ì™„ë£Œ ì• ë‹ˆë©”ì´ì…˜

#### âœ… CardContent (í•™ìŠµ íƒ€ì…ë³„ ë Œë”ëŸ¬)
- **HiraganaCard**: íˆë¼ê°€ë‚˜/ê°€íƒ€ì¹´ë‚˜ ì „ìš©
- **VocabularyCard**: ë‹¨ì–´ ì „ìš©
- **KanjiCard**: í•œì ì „ìš© (ë¶€ìˆ˜, íšìˆ˜, ìŒë…/í›ˆë…)
- **GrammarCard**: ë¬¸ë²• ì „ìš© (íŒ¨í„´, ì„¤ëª…, ì˜ˆë¬¸)

---

## ğŸ¨ ë””ìì¸ ì›ì¹™

### 1. ë°˜ì‘í˜• ë””ìì¸
- ëª¨ë°”ì¼ ìš°ì„  (Mobile-first)
- íƒœë¸”ë¦¿ ìµœì í™”
- ë°ìŠ¤í¬í†± ëŒ€í™”ë©´ ì§€ì›

### 2. ì ‘ê·¼ì„± (WCAG 2.1 AA)
- í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ì™„ë²½ ì§€ì›
- ARIA ë ˆì´ë¸” ë° ì—­í• 
- í¬ì»¤ìŠ¤ ê´€ë¦¬
- ìŠ¤í¬ë¦° ë¦¬ë” í˜¸í™˜

### 3. ì‚¬ìš©ì ê²½í—˜
- ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ (400ms í”Œë¦½)
- ì¦‰ê°ì ì¸ í”¼ë“œë°±
- ì§ê´€ì ì¸ í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
- ì‹œê°ì  íŒíŠ¸ ì œê³µ

---

## âŒ¨ï¸ í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤

| í‚¤ | ê¸°ëŠ¥ |
|---|---|
| `Space` | ì¹´ë“œ ë’¤ì§‘ê¸° |
| `1` | Again (ì™„ì „íˆ í‹€ë¦¼) |
| `2` | Hard (ì–´ë ¤ì› ìŒ) |
| `3` | Good (ê´œì°®ìŒ) |
| `4` | Easy (ì‰¬ì› ìŒ) |
| `â†` | ì´ì „ ì¹´ë“œ |
| `â†’` | ë‹¤ìŒ ì¹´ë“œ |
| `Esc` | í•™ìŠµ ì¢…ë£Œ |

---

## ğŸ”§ ì‚¬ìš© ë°©ë²•

### ê¸°ë³¸ ì‚¬ìš© ì˜ˆì‹œ

```tsx
'use client';

import { FlashcardDeck } from '@/components/flashcard';
import { LearningItem } from '@/components/flashcard/types';

export default function StudyPage() {
  // í•™ìŠµ í•­ëª© ë°ì´í„° (API ë˜ëŠ” Supabaseì—ì„œ ê°€ì ¸ì˜¤ê¸°)
  const learningItems: LearningItem[] = [
    {
      id: '1',
      type: 'hiragana',
      jlptLevel: 'N5',
      content: 'ã‚',
      reading: 'a',
      meaning: 'ì•„',
      exampleSentence: 'ã‚ã•',
      exampleReading: 'asa',
      exampleMeaning: 'ì•„ì¹¨',
    },
    {
      id: '2',
      type: 'vocabulary',
      jlptLevel: 'N5',
      content: 'æ°´',
      reading: 'ã¿ãš',
      meaning: 'ë¬¼',
      category: 'ìŒì‹',
      exampleSentence: 'æ°´ã‚’é£²ã¿ã¾ã™',
      exampleReading: 'ã¿ãšã‚’ã®ã¿ã¾ã™',
      exampleMeaning: 'ë¬¼ì„ ë§ˆì‹­ë‹ˆë‹¤',
    },
  ];

  // ë‹µë³€ ì²˜ë¦¬ (SRS ì—…ë°ì´íŠ¸)
  const handleAnswer = async (itemId: string, quality: number) => {
    // TODO: Supabase user_progress ì—…ë°ì´íŠ¸
    console.log(`ì¹´ë“œ ${itemId}ì— ëŒ€í•œ ë‹µë³€: ${quality}`);

    // SRS ì•Œê³ ë¦¬ì¦˜ í˜¸ì¶œ
    // await updateUserProgress(itemId, quality);
  };

  // í•™ìŠµ ì™„ë£Œ
  const handleComplete = () => {
    console.log('í•™ìŠµ ì™„ë£Œ!');
    // TODO: í†µê³„ ì—…ë°ì´íŠ¸, ë°°ì§€ í™•ì¸ ë“±
  };

  // ì¢…ë£Œ
  const handleExit = () => {
    router.push('/dashboard');
  };

  return (
    <FlashcardDeck
      items={learningItems}
      onAnswer={handleAnswer}
      onComplete={handleComplete}
      onExit={handleExit}
    />
  );
}
```

### ë‹¨ì¼ ì¹´ë“œ ì‚¬ìš© (ì»¤ìŠ¤í…€ êµ¬í˜„)

```tsx
import { Flashcard, useFlashcard } from '@/components/flashcard';

export default function CustomCard() {
  const { isFlipped, flip } = useFlashcard();

  const item = {
    id: '1',
    type: 'hiragana',
    jlptLevel: 'N5',
    content: 'ã‚',
    meaning: 'ì•„',
  };

  return (
    <Flashcard
      item={item}
      isFlipped={isFlipped}
      onFlip={flip}
    />
  );
}
```

---

## ğŸ“Š ë°ì´í„° êµ¬ì¡°

### LearningItem ì¸í„°í˜ì´ìŠ¤

```typescript
interface LearningItem {
  id: string;
  type: 'hiragana' | 'katakana' | 'vocabulary' | 'grammar' | 'kanji';
  jlptLevel: 'N5' | 'N4' | 'N3' | 'N2' | 'N1';
  content: string;              // ì¼ë³¸ì–´ ì›ë¬¸
  reading?: string;             // íˆë¼ê°€ë‚˜ ì½ê¸°
  meaning: string;              // í•œêµ­ì–´ ëœ»
  exampleSentence?: string;     // ì˜ˆë¬¸
  exampleReading?: string;      // ì˜ˆë¬¸ ì½ê¸°
  exampleMeaning?: string;      // ì˜ˆë¬¸ ëœ»
  category?: string;            // ì¹´í…Œê³ ë¦¬
  orderIndex?: number;          // í•™ìŠµ ìˆœì„œ
}
```

### í•œì í™•ì¥ íƒ€ì…

```typescript
interface KanjiItem extends LearningItem {
  type: 'kanji';
  radical?: string;             // ë¶€ìˆ˜
  radicalMeaning?: string;      // ë¶€ìˆ˜ ëœ»
  strokeCount?: number;         // íšìˆ˜
  onyomi?: string[];            // ìŒë…
  kunyomi?: string[];           // í›ˆë…
  examples?: Array<{
    word: string;
    reading: string;
    meaning: string;
  }>;
}
```

### ë¬¸ë²• í™•ì¥ íƒ€ì…

```typescript
interface GrammarItem extends LearningItem {
  type: 'grammar';
  pattern: string;              // ë¬¸ë²• íŒ¨í„´
  explanation: string;          // ë¬¸ë²• ì„¤ëª…
  examples: Array<{
    sentence: string;
    reading: string;
    meaning: string;
  }>;
  notes?: string;
}
```

---

## ğŸ¨ ì• ë‹ˆë©”ì´ì…˜ ì „ëµ

### CSS Transitions (ì„ íƒë¨)

**ì¥ì **:
- ì„±ëŠ¥ ìš°ìˆ˜ (GPU ê°€ì†)
- ë²ˆë“¤ í¬ê¸° 0KB
- êµ¬í˜„ ê°„ë‹¨
- ë¸Œë¼ìš°ì € í˜¸í™˜ì„± ìš°ìˆ˜

**ë‹¨ì **:
- ë³µì¡í•œ ì• ë‹ˆë©”ì´ì…˜ ì œí•œì 
- ìˆœì„œ ì œì–´ ì œí•œ

### Framer Motion (ê³ ë ¤ë¨)

**ì¥ì **:
- ê°•ë ¥í•œ ì• ë‹ˆë©”ì´ì…˜ ì œì–´
- ì œìŠ¤ì²˜ ì§€ì›
- ìˆœì„œ ì• ë‹ˆë©”ì´ì…˜ ì‰¬ì›€

**ë‹¨ì **:
- ë²ˆë“¤ í¬ê¸° ì¦ê°€ (~60KB)
- ì„±ëŠ¥ ì˜¤ë²„í—¤ë“œ
- ì˜ì¡´ì„± ì¶”ê°€

**ê²°ë¡ **: CSS Transitionsë¡œ ì¶©ë¶„ (í˜„ì¬ ìš”êµ¬ì‚¬í•­ ê¸°ì¤€)

---

## â™¿ ì ‘ê·¼ì„± êµ¬í˜„

### 1. í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜
- âœ… Tabìœ¼ë¡œ ëª¨ë“  ì¸í„°ë™í‹°ë¸Œ ìš”ì†Œ ì ‘ê·¼
- âœ… Enter/Spaceë¡œ ë²„íŠ¼ í™œì„±í™”
- âœ… í™”ì‚´í‘œë¡œ ì¹´ë“œ ì´ë™
- âœ… Escë¡œ ì¢…ë£Œ

### 2. ARIA ì§€ì›
```tsx
<div
  role="button"
  tabIndex={0}
  aria-label="ì¹´ë“œ ë’¤ì§‘ê¸°"
  aria-pressed={isFlipped}
>
```

### 3. í¬ì»¤ìŠ¤ ê´€ë¦¬
- ì»¤ìŠ¤í…€ í¬ì»¤ìŠ¤ ë§ (íŒŒë€ìƒ‰ 2px)
- í¬ì»¤ìŠ¤ ìˆœì„œ ë…¼ë¦¬ì 
- í¬ì»¤ìŠ¤ íŠ¸ë© (ëª¨ë‹¬ì—ì„œ)

### 4. ìŠ¤í¬ë¦° ë¦¬ë”
- ì˜ë¯¸ ìˆëŠ” ARIA ë ˆì´ë¸”
- `lang="ja"` ì†ì„±ìœ¼ë¡œ ì¼ë³¸ì–´ ë§ˆí¬ì—…
- ìƒíƒœ ë³€í™” ì•Œë¦¼

---

## ğŸš€ ì„±ëŠ¥ ìµœì í™”

### 1. ì»´í¬ë„ŒíŠ¸ ìµœì í™”
- `React.memo` ì‚¬ìš© (ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€)
- `useCallback` ìœ¼ë¡œ í•¨ìˆ˜ ë©”ëª¨ì´ì œì´ì…˜
- `useMemo` ë¡œ ê³„ì‚° ê²°ê³¼ ìºì‹±

### 2. ì¹´ë“œ í”„ë¦¬ë¡œë”©
```typescript
// ë‹¤ìŒ 3ê°œ ì¹´ë“œ ë¯¸ë¦¬ ë Œë”ë§ (ì˜¤í”„ìŠ¤í¬ë¦°)
const preloadCards = items.slice(currentIndex + 1, currentIndex + 4);
```

### 3. ì´ë¯¸ì§€ ìµœì í™” (í–¥í›„)
- Next.js Image ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©
- WebP í¬ë§·
- Lazy loading

### 4. ë²ˆë“¤ ìµœì í™”
- CSS Transitions (Framer Motion ëŒ€ì‹ )
- íŠ¸ë¦¬ ì‰ì´í‚¹
- ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…

---

## ğŸ“ íŒŒì¼ êµ¬ì¡°

```
src/components/flashcard/
â”œâ”€â”€ index.ts                      # ë°°ëŸ´ ë‚´ë³´ë‚´ê¸°
â”œâ”€â”€ types.ts                      # TypeScript íƒ€ì… ì •ì˜
â”œâ”€â”€ Flashcard.tsx                 # ë‹¨ì¼ ì¹´ë“œ UI
â”œâ”€â”€ FlashcardDeck.tsx             # ë± ì»¨í…Œì´ë„ˆ
â”œâ”€â”€ AnswerButtons.tsx             # SRS í‰ê°€ ë²„íŠ¼
â”œâ”€â”€ ProgressBar.tsx               # ì§„í–‰ë¥  í‘œì‹œ
â”œâ”€â”€ CardContent/                  # í•™ìŠµ íƒ€ì…ë³„ ë Œë”ëŸ¬
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ HiraganaCard.tsx
â”‚   â”œâ”€â”€ VocabularyCard.tsx
â”‚   â”œâ”€â”€ KanjiCard.tsx
â”‚   â””â”€â”€ GrammarCard.tsx
â””â”€â”€ hooks/                        # ì»¤ìŠ¤í…€ í›…
    â”œâ”€â”€ index.ts
    â”œâ”€â”€ useFlashcard.ts           # í”Œë¦½ ìƒíƒœ
    â”œâ”€â”€ useDeck.ts                # ë± ê´€ë¦¬
    â””â”€â”€ useKeyboardShortcuts.ts   # í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
```

---

## âœ… ë‹¤ìŒ ë‹¨ê³„

### 1. ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™
```typescript
// Supabaseì—ì„œ í•™ìŠµ í•­ëª© ê°€ì ¸ì˜¤ê¸°
const { data: items } = await supabase
  .from('learning_items')
  .select('*')
  .eq('type', 'hiragana')
  .order('order_index');
```

### 2. SRS ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„
```typescript
// user_progress ì—…ë°ì´íŠ¸
const nextReview = calculateNextReview(quality, currentProgress);
await supabase
  .from('user_progress')
  .update({
    ease_factor: nextReview.easeFactor,
    interval: nextReview.interval,
    next_review_at: nextReview.nextReviewDate,
  })
  .eq('item_id', itemId);
```

### 3. í•™ìŠµ ì„¸ì…˜ ê¸°ë¡
```typescript
// study_sessions ì €ì¥
await supabase
  .from('study_sessions')
  .insert({
    user_id: userId,
    session_date: new Date(),
    items_studied: totalItems,
    items_correct: correctCount,
    xp_earned: calculateXP(answers),
  });
```

### 4. í…ŒìŠ¤íŠ¸ ì‘ì„±
- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Jest + React Testing Library)
- E2E í…ŒìŠ¤íŠ¸ (Playwright)
- ì ‘ê·¼ì„± í…ŒìŠ¤íŠ¸ (axe-core)

---

## ğŸ¯ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

### 1. íƒ€ì… ì•ˆì „ì„±
- ëª¨ë“  Propsì— TypeScript ì¸í„°í˜ì´ìŠ¤
- íƒ€ì… ê°€ë“œ ì‚¬ìš© (`isKanjiItem`, `isGrammarItem`)
- ì œë„¤ë¦­ íƒ€ì… í™œìš©

### 2. ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬
- ë‹¨ì¼ ì±…ì„ ì›ì¹™
- ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì‘ì€ ì»´í¬ë„ŒíŠ¸
- Props Drilling ìµœì†Œí™”

### 3. ìƒíƒœ ê´€ë¦¬
- ë¡œì»¬ ìƒíƒœ ìš°ì„  (useState)
- í•„ìš”ì‹œ Context API
- ì„œë²„ ìƒíƒœëŠ” Supabase

### 4. ì—ëŸ¬ ì²˜ë¦¬
- Try-catch ë¸”ë¡
- ì—ëŸ¬ ë°”ìš´ë”ë¦¬
- ì‚¬ìš©ì ì¹œí™”ì  ë©”ì‹œì§€

### 5. ì½”ë“œ ë¬¸ì„œí™”
- JSDoc ì£¼ì„
- ì‚¬ìš© ì˜ˆì‹œ ì œê³µ
- README ì‘ì„±

---

## ğŸ“š ì°¸ê³  ìë£Œ

### ì„¤ê³„ ì›ì¹™
- [Material Design - Cards](https://material.io/components/cards)
- [Anki Manual - Card Types](https://docs.ankiweb.net/)
- [WCAG 2.1 Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)

### ì• ë‹ˆë©”ì´ì…˜
- [CSS Tricks - Flip Card](https://css-tricks.com/snippets/css/flip-an-element/)
- [MDN - CSS Transforms](https://developer.mozilla.org/en-US/docs/Web/CSS/transform)

### ì ‘ê·¼ì„±
- [A11y Project](https://www.a11yproject.com/)
- [WebAIM](https://webaim.org/)

---

## ğŸ” FAQ

### Q: ì™œ Framer Motion ëŒ€ì‹  CSS Transitions?
A: í˜„ì¬ ìš”êµ¬ì‚¬í•­ì—ëŠ” CSSë¡œ ì¶©ë¶„í•˜ê³ , ë²ˆë“¤ í¬ê¸°ë¥¼ ìµœì†Œí™”í•˜ê¸° ìœ„í•´.

### Q: ì¹´ë“œ í”„ë¦¬ë¡œë”©ì€ ì–´ë–»ê²Œ?
A: í˜„ì¬ ì¸ë±ìŠ¤ + 1~3ê¹Œì§€ ì˜¤í”„ìŠ¤í¬ë¦° ë Œë”ë§ ê³„íš.

### Q: ëª¨ë°”ì¼ ì œìŠ¤ì²˜ ì§€ì›?
A: Phase 2ì—ì„œ Swipe ì œìŠ¤ì²˜ ì¶”ê°€ ì˜ˆì •.

### Q: SRS ì•Œê³ ë¦¬ì¦˜ì€ ì–´ë””ì—?
A: `src/lib/srs/` ë””ë ‰í† ë¦¬ì— ë³„ë„ êµ¬í˜„ ì˜ˆì •.

---

**ì‘ì„±ì**: Claude (Frontend Architect Persona)
**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-10-20
